<!DOCTYPE html>
<head>
	<meta charset='UTF-8'>
	<meta name="viewport" content="width=device-width, initial-scale=1">	
	<title>Kanji // Etcetera</title>	
	<link rel='stylesheet' href='css/slidetounlock.css'>  	
	<link rel='stylesheet' href='css/style.css'>  
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js'></script>
	<script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js'></script>
	<script src='/slidetounlock.js'></script>
	<script type="text/javascript" src="14.5.js"></script>
	<script type="text/javascript">
		var alerted = localStorage.getItem('alerted') || '';
		if (alerted != 'yes') {
			alert("Hi! This is Etcetera.\n\nA WIP project that I want to finish since Manticore didn't.\n\nAs of right now, only the AudioWorklet exploit is implemented.\n\nI am a beginner in the jailbreak scene so it will take some time before this is in full working order.\n\nPressing the 'jailbreak' button will only run the AudioWorklet exploit. Nothing else will happen.");
		 localStorage.setItem('alerted','yes');
		}
	</script>
</head>
<body>
	<div class="content">
		<script type="text/javascript" src="index.js"></script>
		<div class="header" onclick="slideEasterEgg();">
			<h1>Etcetera // その他</h1>
			<h5>For iOS 14.5 - 14.6</h5>
			<h5>Subject to change | Needs Kernel Exploit</h5>
			<h5>Created by <a href="https://twitter.com/rpwnage" style="color: #ff00ff;">rpwnage</a></h5>
			<h5>WIP and Hopefully Finished By <a href="https://twitter.com/kanjishere" style="color: #ff00ff;">Kanji</a> x <a href="https://twitter.com/turnerhackz1" style="color: #ff00ff;">turnerhackz1</a></h5>
			
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://unpkg.com/jquery.terminal/js/jquery.terminal.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/jquery.terminal/css/jquery.terminal.min.css"/>
		</div>
		<div id="interact" style="width: 100%;">
			<script type="text/javascript" src="14.6.js"></script>
            <button id="jbButton" class="exploitButton" onclick="start();">Jailbreak</button>
			<script>
if(window.location.protocol != "https:") {
        window.location.protocol = "https";
}
/*$('head').terminal({
    hello: function(what) {
        this.echo('Hello, ' + what +
                  '. Wellcome to this terminal.');
    }
}, {
    greetings: 'Hi'
});*/
      function log(s) {
	      $('head').terminal({
		      this.echo(s);
      });
	      //alert(s);
        //document.body.innerText += s + "\n";
      }
      //var d = document.createElement('div');
      //var htmlCanvas = document.getElementById("one");
      //var offscreen = htmlCanvas.transferControlToOffscreen();

      //var worker = new Worker("offscreencanvas.js");
      //worker.postMessage({canvas: offscreen}, [offscreen]);

      //var keep = [];
      async function start() {
        log("starting...")
        var context = new OfflineAudioContext(1, 128, 300000);
        context.audioWorklet.addModule("14.6.js").then(async () => {
          var wa = new AudioWorkletNode(context, "a");
          var wb = new AudioWorkletNode(context, "b");
          wa.port.onmessage = (e) => { log(e.data);}
          await (new Promise((res) => setTimeout(res, 100)));
          wa.port.postMessage("pwn");
          //wb.port.div(d);
        });
      }
				/*var devices = (/iPhone|iPad|iPod/i);

				if(devices.test(navigator.userAgent))	{
					if (currentFirmware(navigator.userAgent).startsWith("14.5")) {
    					document.getElementById("jbButton").innerHTML = "Jailbreak 🔓📱";
  					} else if (currentFirmware(navigator.userAgent).startsWith("14.6")) {
						document.getElementById("jbButton").innerHTML = "Jailbreak 🔓📱";
					} else {
						document.getElementById("jbButton").innerHTML = "Unsupported: iOS " + currentFirmware(navigator.userAgent) + "📱😢";
					}
				} else {
  					document.getElementById("jbButton").innerHTML = "Unsupported: Desktop Environment 💻";
				}*/
			</script>
            <div id="page-wrap" style="display: none;"><div id="well"><h2><strong id="slider"></strong><span>slide to jailbreak</span></h2></div></div>
		</div>		
	</div>
</body>
</html>
